{"version": 1,"name": "particles-default-render.cgfx","samplers":{"previousState":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071},"creationState":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071},"mappingTable":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071},"vParticleState":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071},"fParticleState":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071},"animation":{"MinFilter": 9728,"MagFilter": 9728,"WrapS": 33071,"WrapT": 33071},"texture":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 33071,"WrapT": 33071},"noiseTexture":{"MinFilter": 9985,"MagFilter": 9729,"WrapS": 10497,"WrapT": 10497}},"parameters":{"textureSize":{"type": "float","columns": 2},"invTextureSize":{"type": "float","columns": 2},"regionSize":{"type": "float","columns": 2},"invRegionSize":{"type": "float","columns": 2},"regionPos":{"type": "float","columns": 2},"halfExtents":{"type": "float","columns": 3},"center":{"type": "float","columns": 3},"maxLifeTime":{"type": "float"},"previousState":{"type": "sampler2D"},"shift":{"type": "float","columns": 3},"timeStep":{"type": "float"},"lifeStep":{"type": "float"},"maxSpeed":{"type": "float"},"creationState":{"type": "sampler2D"},"creationScale":{"type": "float","columns": 2},"projection":{"type": "float","rows": 4,"columns": 4},"modelView":{"type": "float","rows": 4,"columns": 3},"mappingTable":{"type": "sampler2D"},"mappingSize":{"type": "float","columns": 2},"invMappingSize":{"type": "float","columns": 2},"mappingPos":{"type": "float","columns": 2},"vParticleState":{"type": "sampler2D"},"fParticleState":{"type": "sampler2D"},"animationSize":{"type": "float","columns": 2},"animation":{"type": "sampler2D"},"zSorted":{"type": "bool"},"texture":{"type": "sampler2D"},"animationScale":{"type": "float","columns": 4},"animationRotation":{"type": "float","columns": 2},"noiseTexture":{"type": "sampler2D"},"randomizedRotation":{"type": "float"},"randomizedScale":{"type": "float","columns": 2},"randomizedOrientation":{"type": "float","columns": 2},"randomizedAlpha":{"type": "float"},"animatedRotation":{"type": "bool"},"animatedScale":{"type": "bool"},"animatedOrientation":{"type": "bool"},"animatedAlpha":{"type": "bool"},"quadVertex":{"type": "float","rows": 4,"columns": 2,"values": [-1,-1,1,-1,1,1,-1,1]}},"techniques":{"opaque":[{"parameters": ["invTextureSize","regionSize","invRegionSize","regionPos","halfExtents","center","maxLifeTime","projection","modelView","mappingTable","invMappingSize","mappingPos","vParticleState","animationSize","animation","zSorted","animationScale","animationRotation","noiseTexture","randomizedRotation","randomizedScale","randomizedOrientation","randomizedAlpha","animatedRotation","animatedScale","animatedOrientation","animatedAlpha","quadVertex","texture"],"semantics": ["ATTR0"],"states":{"DepthTestEnable": true,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": false},"programs": ["vp_render","fp_render"]}],"alpha":[{"parameters": ["invTextureSize","regionSize","invRegionSize","regionPos","halfExtents","center","maxLifeTime","projection","modelView","mappingTable","invMappingSize","mappingPos","vParticleState","animationSize","animation","zSorted","animationScale","animationRotation","noiseTexture","randomizedRotation","randomizedScale","randomizedOrientation","randomizedAlpha","animatedRotation","animatedScale","animatedOrientation","animatedAlpha","quadVertex","texture"],"semantics": ["ATTR0"],"states":{"DepthTestEnable": true,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": true},"programs": ["vp_render","fp_render"]}],"additive":[{"parameters": ["invTextureSize","regionSize","invRegionSize","regionPos","halfExtents","center","maxLifeTime","projection","modelView","mappingTable","invMappingSize","mappingPos","vParticleState","animationSize","animation","zSorted","animationScale","animationRotation","noiseTexture","randomizedRotation","randomizedScale","randomizedOrientation","randomizedAlpha","animatedRotation","animatedScale","animatedOrientation","animatedAlpha","quadVertex","texture"],"semantics": ["ATTR0"],"states":{"DepthTestEnable": true,"DepthMask": false,"CullFaceEnable": false,"BlendEnable": true,"BlendFunc": [770,1]},"programs": ["vp_render","fp_render"]}]},"programs":{"fp_render":{"type": "fragment","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying TZ_LOWP vec4 tz_Color;varying vec4 tz_TexCoord[2];\nvec4 _ret_0;vec4 _TMP0;uniform sampler2D texture;void main()\n{_TMP0=texture2D(texture,tz_TexCoord[1].xy);_ret_0=_TMP0*tz_Color;gl_FragColor=_ret_0;}"},"vp_render":{"type": "vertex","code": "#ifdef GL_ES\n#define TZ_LOWP lowp\nprecision mediump float;\nprecision mediump int;\n#else\n#define TZ_LOWP\n#endif\nvarying TZ_LOWP vec4 tz_Color;varying vec4 tz_TexCoord[2];attribute vec4 ATTR0;\nvec4 _outColor1;vec4 _outPosition1;vec2 _outUV1;vec2 _outParticle1;float _TMP15;vec4 _TMP32;vec3 _TMP14;vec3 _TMP12;float _TMP31;float _TMP30;float _TMP29;float _TMP41;float _TMP40;float _TMP28;vec4 _TMP43;float _TMP44;float _TMP42;vec2 _TMP6;vec4 _TMP27;float _TMP5;vec4 _TMP26;vec2 _TMP4;vec4 _TMP25;float _TMP34;vec2 _TMP23;vec2 _TMP22;vec2 _TMP2;vec4 _TMP16;float _TMP33;vec2 _TMP91;float _x0092;float _y0092;vec2 _mappingUV10092;vec2 _particleUV10092;float _y0094;float _x0096;vec2 _p0098;vec4 _life0104;vec2 _c0106;float _TMP113;vec4 _TMP119;vec2 _c0122;vec4 _life0124;vec2 _c0126;float _TMP133;float _TMP145;vec4 _c010152;vec2 _c0154;float _TMP161;float _TMP173;vec2 _TMP179;vec2 _enc10180;float _TMP183;vec2 _x0190;vec3 _TMP193;vec2 _uv0196;float _TMP197;float _TMP209;float _TMP215;vec2 _uv0216;float _TMP227;float _TMP233;vec2 _uv0234;float _TMP245;vec2 _scale0252;vec4 _TMP255;float _s0256;vec2 _c0258;float _TMP265;float _TMP277;float _t0284;vec2 _c0286;float _TMP289;float _x0290;float _rad0294;vec4 _TMP297;float _s0298;vec2 _c0300;float _TMP307;float _t0314;vec2 _c0316;float _TMP319;float _x0320;float _c0324;float _s0324;vec3 _TMP900324[3];float _t0330;vec2 _c0332;float _cp0334;float _sp0334;float _ct0334;float _st0334;vec3 _TMP890334[3];vec3 _r0344;vec3 _r0352;float _TMP361;float _x0362;float _cp0366;float _sp0366;float _ct0366;float _st0366;vec3 _TMP880366[3];float _a0368;float _a0370;float _a0372;float _a0374;vec3 _r0376;vec3 _v0376;vec3 _r0384;vec3 _TMP393;vec2 _uv0396;float _TMP397;float _TMP409;float _TMP415;vec2 _uv0416;float _TMP427;float _TMP433;vec2 _uv0434;float _TMP445;vec3 _TMP451[3];vec3 _up0452;vec3 _right0452;vec3 _at0452;vec3 _r0474;vec3 _v0474;vec3 _r0482;vec3 _pt0494;vec3 _r0502;float _TMP511;float _x0512;float _TMP517;float _x0518;vec4 _r0524;vec4 _v0524;vec4 _TMP527;float _s0528;vec2 _c0530;vec4 _TMP533;float _s0534;vec2 _c0536;float _t0538;vec2 _c0540;float _TMP543;float _x0544;vec3 _TMP547;vec3 _TMP548;vec3 _TMP549;uniform vec2 invTextureSize;uniform vec2 regionSize;uniform vec2 invRegionSize;uniform vec2 regionPos;uniform vec3 halfExtents;uniform vec3 center;uniform float maxLifeTime;uniform vec4 projection[4];uniform vec3 modelView[4];uniform sampler2D mappingTable;uniform vec2 invMappingSize;uniform vec2 mappingPos;uniform sampler2D vParticleState;uniform vec2 animationSize;uniform sampler2D animation;uniform bool zSorted;uniform vec4 animationScale;uniform vec2 animationRotation;uniform sampler2D noiseTexture;uniform float randomizedRotation;uniform vec2 randomizedScale;uniform vec2 randomizedOrientation;uniform float randomizedAlpha;uniform bool animatedRotation;uniform bool animatedScale;uniform bool animatedOrientation;uniform bool animatedAlpha;uniform vec2 quadVertex[4];void main()\n{vec2 _particle6;float _life3;float _animTime;vec3 _pos;vec2 _scale1;vec2 _inPosition;float _rad2;vec3 _right1;vec3 _up1;_y0094=regionSize.x/3.0;_x0096=ATTR0.y/_y0094;_TMP33=floor(_x0096);_x0092=ATTR0.y-_y0094*_TMP33;_y0092=(ATTR0.y-_x0092)*3.0*invRegionSize.x;if(zSorted){_p0098=(vec2(_x0092,_y0092)+0.5)*vec2(3.0,3.0)*invRegionSize;_mappingUV10092=(mappingPos+(regionSize*_p0098)/vec2(3.0,3.0))*invMappingSize;_TMP16=texture2D(mappingTable,_mappingUV10092);_particleUV10092=_TMP16.xy*255.0;_TMP91=_particleUV10092*vec2(3.0,3.0)*invRegionSize;}else{_TMP91=vec2(_x0092,_y0092)*vec2(3.0,3.0)*invRegionSize;}\n_particle6=(regionPos+regionSize*_TMP91)*invTextureSize;_c0106=_particle6+vec2(2.5,0.5)*invTextureSize;_life0104=texture2D(vParticleState,_c0106);_TMP34=dot(_life0104.zw,vec2(3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP34);_TMP113=max(0.0,_TMP42);_life3=_TMP113*maxLifeTime;if(_life3<=0.0){_outPosition1=vec4(0.0,0.0,0.0,0.0);tz_TexCoord[0].xy=_outParticle1;tz_TexCoord[1].xy=_outUV1;gl_Position=vec4(0.0,0.0,0.0,0.0);tz_Color=_outColor1;return;}\n_c0122=_particle6+vec2(2.5,2.5)*invTextureSize;_TMP119=texture2D(vParticleState,_c0122);_c0126=_particle6+vec2(2.5,0.5)*invTextureSize;_life0124=texture2D(vParticleState,_c0126);_TMP34=dot(_life0124.zw,vec2(3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP34);_TMP133=max(0.0,_TMP42);_TMP34=dot(_life0124.xy,vec2(3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP34);_TMP145=max(0.0,_TMP42);_TMP2=vec2(_TMP133,_TMP145);_c0154=_particle6+vec2(2.5,1.5)*invTextureSize;_c010152=texture2D(vParticleState,_c0154);_TMP34=dot(_c010152.xy,vec2(3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP34);_TMP161=max(0.0,_TMP42);_TMP34=dot(_c010152.zw,vec2(3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP34);_TMP173=max(0.0,_TMP42);_animTime=_TMP161-(_TMP2.x/_TMP2.y)*_TMP173;if(_TMP119.z>=1.0){_TMP179=vec2(1.0,1.0);}else{_TMP42=min(1.0,_TMP119.z);_TMP183=max(0.0,_TMP42);_x0190=_TMP183*vec2(16.0,1.0);_TMP22=fract(_x0190);_enc10180=_TMP22*16.0;_enc10180.y=_enc10180.y-_enc10180.x/16.0;_TMP23=floor(_enc10180);_TMP179=_TMP23/15.0;}\n_uv0196=_particle6+vec2(0.5,0.5)*invTextureSize;_TMP43=texture2D(vParticleState,_uv0196);_TMP44=dot(_TMP43,vec4(5.93718141E-008,1.51991844E-005,3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP44);_TMP209=max(0.0,_TMP42);_TMP197=(_TMP209-0.5)*2.0;_uv0216=_uv0196+vec2(0.0,invTextureSize.y);_TMP43=texture2D(vParticleState,_uv0216);_TMP44=dot(_TMP43,vec4(5.93718141E-008,1.51991844E-005,3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP44);_TMP227=max(0.0,_TMP42);_TMP215=(_TMP227-0.5)*2.0;_uv0234=_uv0196+vec2(0.0,2.0*invTextureSize.y);_TMP43=texture2D(vParticleState,_uv0234);_TMP44=dot(_TMP43,vec4(5.93718141E-008,1.51991844E-005,3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP44);_TMP245=max(0.0,_TMP42);_TMP233=(_TMP245-0.5)*2.0;_TMP193=vec3(_TMP197,_TMP215,_TMP233);_pos=_TMP193*halfExtents+center;_s0256=1.5/animationSize.y;_c0258=vec2(_animTime,_s0256);_TMP255=texture2D(animation,_c0258);_TMP34=dot(_TMP255.zw,vec2(3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP34);_TMP265=max(0.0,_TMP42);_TMP34=dot(_TMP255.xy,vec2(3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP34);_TMP277=max(0.0,_TMP42);_scale0252=vec2(_TMP265,_TMP277);_scale1=animationScale.xy+_scale0252*animationScale.zw;_x0290=_TMP119.w*7.96875;_TMP289=fract(_x0290);if(_TMP289>=0.5){_t0284=_life3*float(animatedScale);_c0286=_TMP179+vec2(1.39369339E-001,7.58428156E-001)*_t0284+vec2(1.82852328E-001,1.48580581E-001);_TMP25=texture2D(noiseTexture,_c0286);_TMP4=(2.0*_TMP25.xw-1.0)*randomizedScale;_scale1=_scale1+_TMP4;}\n_inPosition=(quadVertex[(int(ATTR0.x))]*_scale1)*0.5;_s0298=2.5/animationSize.y;_c0300=vec2(_animTime,_s0298);_TMP297=texture2D(animation,_c0300);_TMP44=dot(_TMP297,vec4(5.93718141E-008,1.51991844E-005,3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP44);_TMP307=max(0.0,_TMP42);_rad0294=animationRotation.x+_TMP307*animationRotation.y;_rad2=_rad0294;_x0320=_TMP119.w*3.984375;_TMP319=fract(_x0320);if(_TMP319>=0.5){_t0314=_life3*float(animatedRotation);_c0316=_TMP179+vec2(6.80039465E-001,3.26437414E-001)*_t0314+vec2(2.60632575E-001,2.91877478E-001);_TMP26=texture2D(noiseTexture,_c0316);_TMP5=(2.0*_TMP26.z-1.0)*randomizedRotation;_rad2=_rad0294+_TMP5;}\n_c0324=cos(_rad2);_s0324=sin(_rad2);_TMP900324[0]=vec3(_c0324,_s0324,0.0);_TMP900324[1]=vec3(-_s0324,_c0324,0.0);_right1=vec3(1.0,0.0,0.0);_up1=vec3(0.0,1.0,0.0);_x0362=_TMP119.w*1.59375000E+001;_TMP361=fract(_x0362);if(_TMP361>=0.5){_t0330=_life3*float(animatedOrientation);_c0332=_TMP179+vec2(4.03906703E-001,3.20540577E-001)*_t0330+vec2(4.88128573E-001,9.65456218E-002);_TMP27=texture2D(noiseTexture,_c0332);_TMP6=(2.0*_TMP27.yx-1.0)*randomizedOrientation;_cp0334=cos(_TMP6.y);_sp0334=sin(_TMP6.y);_ct0334=cos(_TMP6.x);_st0334=sin(_TMP6.x);_TMP890334[0]=vec3(_cp0334,_sp0334*_st0334,-_sp0334*_ct0334);_TMP890334[1]=vec3(0.0,_ct0334,_st0334);_TMP890334[2]=vec3(_sp0334,-_cp0334*_st0334,_cp0334*_ct0334);_r0344.x=dot(_TMP890334[0],vec3(1.0,0.0,0.0));_r0344.y=dot(_TMP890334[1],vec3(1.0,0.0,0.0));_r0344.z=dot(_TMP890334[2],vec3(1.0,0.0,0.0));_right1=_r0344;_r0352.x=dot(_TMP890334[0],vec3(0.0,1.0,0.0));_r0352.y=dot(_TMP890334[1],vec3(0.0,1.0,0.0));_r0352.z=dot(_TMP890334[2],vec3(0.0,1.0,0.0));_up1=_r0352;}\n_x0518=_TMP119.w*9.96093750E-001;_TMP517=fract(_x0518);if(_TMP517>=0.5){_a0368=_TMP119.x*6.28318548;_cp0366=cos(_a0368);_a0370=_TMP119.x*6.28318548;_sp0366=sin(_a0370);_a0372=_TMP119.y*3.14159274;_ct0366=cos(_a0372);_a0374=_TMP119.y*3.14159274;_st0366=sin(_a0374);_TMP880366[0]=vec3(_cp0366,_sp0366*_st0366,-_sp0366*_ct0366);_TMP880366[1]=vec3(0.0,_ct0366,_st0366);_TMP880366[2]=vec3(_sp0366,-_cp0366*_st0366,_cp0366*_ct0366);_v0376=_right1*_inPosition.x+_up1*_inPosition.y;_r0376.x=dot(_TMP900324[0],_v0376);_r0376.y=dot(_TMP900324[1],_v0376);_r0376.z=dot(vec3(0.0,0.0,1.0),_v0376);_r0384.x=dot(_TMP880366[0],_r0376);_r0384.y=dot(_TMP880366[1],_r0376);_r0384.z=dot(_TMP880366[2],_r0376);_pos=_pos+_r0384;_pos=_pos.x*modelView[0]+_pos.y*modelView[1]+_pos.z*modelView[2];}else{_x0512=_TMP119.w*1.9921875;_TMP511=fract(_x0512);if(_TMP511>=0.5){_uv0396=_particle6+vec2(1.5,0.5)*invTextureSize;_TMP43=texture2D(vParticleState,_uv0396);_TMP44=dot(_TMP43,vec4(5.93718141E-008,1.51991844E-005,3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP44);_TMP409=max(0.0,_TMP42);_TMP397=(_TMP409-0.5)*2.0;_uv0416=_uv0396+vec2(0.0,invTextureSize.y);_TMP43=texture2D(vParticleState,_uv0416);_TMP44=dot(_TMP43,vec4(5.93718141E-008,1.51991844E-005,3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP44);_TMP427=max(0.0,_TMP42);_TMP415=(_TMP427-0.5)*2.0;_uv0434=_uv0396+vec2(0.0,2.0*invTextureSize.y);_TMP43=texture2D(vParticleState,_uv0434);_TMP44=dot(_TMP43,vec4(5.93718141E-008,1.51991844E-005,3.89099121E-003,9.96093750E-001));_TMP42=min(1.0,_TMP44);_TMP445=max(0.0,_TMP42);_TMP433=(_TMP445-0.5)*2.0;_TMP393=vec3(_TMP397,_TMP415,_TMP433);_right0452=vec3(1.0,0.0,0.0)*_TMP393.zxy-vec3(0.0,0.0,1.0)*_TMP393.yzx;_TMP28=dot(_right0452,_right0452);if(_TMP28<=0.0){_TMP451[0]=vec3(1.0,0.0,0.0);_TMP451[1]=vec3(0.0,0.0,-1.0);_TMP451[2]=vec3(0.0,1.0,0.0);}else{_TMP40=dot(_TMP393,_TMP393);_TMP41=inversesqrt(_TMP40);_at0452=_TMP41*_TMP393;_TMP40=dot(_right0452,_right0452);_TMP41=inversesqrt(_TMP40);_right0452=_TMP41*_right0452;_up0452=_at0452.yzx*_right0452.zxy-_at0452.zxy*_right0452.yzx;_TMP547.x=_right0452.x;_TMP547.y=_up0452.x;_TMP547.z=_at0452.x;_TMP548.x=_right0452.y;_TMP548.y=_up0452.y;_TMP548.z=_at0452.y;_TMP549.x=_right0452.z;_TMP549.y=_up0452.z;_TMP549.z=_at0452.z;_TMP451[0]=_TMP547;_TMP451[1]=_TMP548;_TMP451[2]=_TMP549;}\n_v0474=_right1*_inPosition.x+_up1*_inPosition.y;_r0474.x=dot(_TMP900324[0],_v0474);_r0474.y=dot(_TMP900324[1],_v0474);_r0474.z=dot(vec3(0.0,0.0,1.0),_v0474);_r0482.x=dot(_TMP451[0],_r0474);_r0482.y=dot(_TMP451[1],_r0474);_r0482.z=dot(_TMP451[2],_r0474);_pos=_pos+_r0482;_pos=_pos.x*modelView[0]+_pos.y*modelView[1]+_pos.z*modelView[2];}else{_pos=_pos.x*modelView[0]+_pos.y*modelView[1]+_pos.z*modelView[2];_pt0494=_right1*_inPosition.x+_up1*_inPosition.y;_TMP29=length(modelView[0]);_TMP30=length(modelView[1]);_TMP31=length(modelView[2]);_TMP12=_pt0494*vec3(_TMP29,_TMP30,_TMP31);_r0502.x=dot(_TMP900324[0],_TMP12);_r0502.y=dot(_TMP900324[1],_TMP12);_r0502.z=dot(vec3(0.0,0.0,1.0),_TMP12);_pos=_pos+_r0502;}}\n_TMP14=_pos+modelView[3];_v0524=vec4(_TMP14.x,_TMP14.y,_TMP14.z,1.0);_r0524=_v0524.x*projection[0];_r0524=_r0524+_v0524.y*projection[1];_r0524=_r0524+_v0524.z*projection[2];_r0524=_r0524+_v0524.w*projection[3];_outPosition1=_r0524;_outParticle1=_particle6;_s0528=3.5/animationSize.y;_c0530=vec2(_animTime,_s0528);_TMP527=texture2D(animation,_c0530);_outUV1=_TMP527.xy+((quadVertex[(int(ATTR0.x))]*vec2(1.0,-1.0)+1.0)*0.5)*_TMP527.zw;_s0534=0.5/animationSize.y;_c0536=vec2(_animTime,_s0534);_TMP533=texture2D(animation,_c0536);_outColor1=_TMP533;_x0544=_TMP119.w*3.18750000E+001;_TMP543=fract(_x0544);if(_TMP543>=0.5){_t0538=_life3*float(animatedAlpha);_c0540=_TMP179+vec2(2.59169251E-001,9.68880057E-002)*_t0538+vec2(8.36957872E-001,9.04777646E-001);_TMP32=texture2D(noiseTexture,_c0540);_TMP15=(2.0*_TMP32.w-1.0)*randomizedAlpha;_outColor1.w=_TMP533.w+_TMP15;}\ntz_TexCoord[0].xy=_particle6;tz_TexCoord[1].xy=_outUV1;gl_Position=_r0524;tz_Color=_outColor1;}"}}}